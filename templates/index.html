<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <!-- import CSS -->
  <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>
<body>
  <div id="app">
      <el-label>模型</el-label>
      <el-select v-model="train_data.net" placeholder="请选择">
            <el-option
              v-for="(value,key,index) in options"
              :key="key"
              :label="value"
              :value="key">
            </el-option>
        </el-select>
      <el-input v-model="train_data.lr" placeholder="学习率">
          <template slot="prepend">学习率</template>
      </el-input>
      <el-input v-model="train_data.epoch" type="number" placeholder="训练代数">
          <template slot="prepend">训练代数</template>
      </el-input>
    <el-button @click="alertStart()">开始训练</el-button>
    <el-dialog :visible.sync="visible" title="Hello world">
      <p>Try Element</p>
    </el-dialog>
  </div>
</body>
  <!-- import Vue before Element -->
  <script src="https://unpkg.com/vue/dist/vue.js"></script>
  <!-- import JavaScript -->
  <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script>
    new Vue({
      el: '#app',
        methods: {
          async alertStart () {
              data = this.train_data
              const res = await axios.post('http://localhost:5000/run',data)
              console.log(res)
              this.train_data.lr = res.data
          },
            async getData () {
              const res = await axios.get('http://localhost:5000/data')
              console.log(res)
              this.options = res.data
          }

        },
        mounted: function () {
             this.getData();
        },
      data: function() {
        return {
            options: [],
            value: '',
            train_data: {
                net: 'cnn_model',
                lr: 0.005,
                epoch: 20,
            },

            visible: false
        }
      }

    })
  </script>
</html>